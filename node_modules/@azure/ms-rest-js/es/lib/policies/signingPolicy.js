// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License. See License.txt in the project root for license information.
import * as tslib_1 from "tslib";
import { BaseRequestPolicy } from "./requestPolicy";
export function signingPolicy(authenticationProvider) {
  return {
    create(nextPolicy, options) {
      return new SigningPolicy(nextPolicy, options, authenticationProvider);
    },
  };
}
var SigningPolicy = /** @class */ (_super => {
  tslib_1.__extends(SigningPolicy, _super);

  class SigningPolicy {
    constructor(nextPolicy, options, authenticationProvider) {
      const _this = _super.call(this, nextPolicy, options) || this;
      _this.authenticationProvider = authenticationProvider;
      return _this;
    }

    signRequest(request) {
      return this.authenticationProvider.signRequest(request);
    }

    sendRequest(request) {
      const _this = this;
      return this.signRequest(request).then(nextRequest => {
        return _this._nextPolicy.sendRequest(nextRequest);
      });
    }
  }

  return SigningPolicy;
})(BaseRequestPolicy);
export { SigningPolicy };
//# sourceMappingURL=signingPolicy.js.map
